(this.webpackJsonpredux_racstagram=this.webpackJsonpredux_racstagram||[]).push([[0],{110:function(e,t,a){},114:function(e,t,a){},117:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(19),s=a.n(c),o=a(6),i=a.n(o),u=a(12),l=a(9),j=a(17),b=a(22),d=a(16),O=a(181),m=(a(110),a(2)),p=function(){var e=Object(l.c)((function(e){return e.auth.errorSelector}));return Object(m.jsx)("div",{className:"show_error",children:e?Object(m.jsx)(O.a,{severity:"warning",className:"message",children:"auth/user-not-found"===e||"auth/wrong-password"===e?"\uac00\uc785\ud558\uc9c0 \uc54a\uc740 \uc544\uc774\ub514\uc774\uac70\ub098, \uc798\ubabb\ub41c \ube44\ubc00\ubc88\ud638\uc785\ub2c8\ub2e4.":"auth/email-already-in-use"===e?"\uc774\ubbf8 \uac00\uc785\ub41c \uc774\uba54\uc77c \uc785\ub2c8\ub2e4.":e}):Object(m.jsx)(m.Fragment,{})})},f=a(65),g=a(29),h=(a(114),function(e){var t=e.onSocialClick;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"ortext_container",children:[Object(m.jsx)("div",{className:"ortext_slice"}),Object(m.jsx)("div",{className:"ortext",children:"\ub610\ub294"}),Object(m.jsx)("div",{className:"ortext_slice"})]}),Object(m.jsxs)("div",{className:"social_signIn",children:[Object(m.jsxs)("button",{className:"auth_btn",name:"google",onClick:t,children:[Object(m.jsx)(g.a,{className:"icon",icon:f.b,size:"1x"}),"Google\ub85c \ub85c\uadf8\uc778 \ud558\uae30"]}),Object(m.jsxs)("button",{className:"auth_btn",name:"github",onClick:function(e){t(e)},children:[Object(m.jsx)(g.a,{className:"icon",icon:f.a,size:"1x"}),"Github\ub85c \ub85c\uadf8\uc778 \ud558\uae30"]})]})]})}),x=a(5),v=a(1),N=a(14),k=a(182),y=a(58);a(115),a(141),a(140);y.a.initializeApp({apiKey:"AIzaSyCNSl1fOR0VRanTemWr3yVBerXi-zQtvz0",authDomain:"rwitter-914af.firebaseapp.com",projectId:"rwitter-914af",storageBucket:"rwitter-914af.appspot.com",messagingSenderId:"859508416604",appId:"1:859508416604:web:4eb7bcb0fbdb00088b4699"});var I,U,w,_,C,P,S,D=y.a,E=y.a.auth(),L=y.a.firestore(),T=y.a.storage(),M={imageUrl:"",getImageUrl:{isGet:!1,loading:!1,getError:""},deleteImageUrl:{loading:!1,isDelete:!1,deleteError:""}},A=Object(N.b)("redux-racstagram/images/getImageUrlThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=13;break}return e.next=4,a.getState();case 4:return r=e.sent,n=r.profile.currentUser,c=T.ref().child("".concat(n.uid,"/").concat(Object(k.a)())),e.next=9,c.putString(t,"data_url");case 9:return s=e.sent,e.next=12,s.ref.getDownloadURL();case 12:return e.abrupt("return",e.sent);case 13:e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(0),o=e.t0.code,u=e.t0.message,e.abrupt("return",a.rejectWithValue({code:o,message:u}));case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,a){return e.apply(this,arguments)}}()),F=Object(N.b)("redux-racstagram/images/deleteImageUrlThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t!==Ve&&T.refFromURL(t).delete(),e.abrupt("return",!0);case 5:return e.prev=5,e.t0=e.catch(0),r=e.t0.code,n=e.t0.message,e.abrupt("return",a.rejectWithValue({code:r,message:n}));case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}()),G=Object(N.c)({name:"redux-racstagram/images",initialState:M,reducers:{resetImage:function(){return Object(v.a)({},M)}},extraReducers:(I={},Object(x.a)(I,A.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{getImageUrl:Object(v.a)(Object(v.a)({},e.getImageUrl),{},{loading:!0})})})),Object(x.a)(I,A.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{imageUrl:a,getImageUrl:Object(v.a)(Object(v.a)({},e.getImageUrl),{},{loading:!1,isGet:!0})})})),Object(x.a)(I,A.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{getImageUrl:Object(v.a)(Object(v.a)({},e.getImageUrl),{},{loading:!1,getError:a})})})),Object(x.a)(I,F.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{deleteImageUrl:Object(v.a)(Object(v.a)({},e.deleteImageUrl),{},{loading:!0})})})),Object(x.a)(I,F.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{deleteImageUrl:Object(v.a)(Object(v.a)({},e.deleteImageUrl),{},{loading:!1,isDelete:a})})})),Object(x.a)(I,F.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{deleteImageUrl:Object(v.a)(Object(v.a)({},e.deleteImageUrl),{},{loading:!1,deleteError:a})})})),I)}),R=G.reducer,W=G.actions.resetImage,z=a(26),B=a(87),V=Object(N.b)("redux-racstagram/comment/setCommentThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o,u,l,j,b,d,O,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.comment,n=t.postId,e.prev=1,c=a.getState(),s=c.users.currentUserInfo,o=c.comment.comments,u=c.profile.currentUser.uid,l={userId:u,postId:n,userDisplayName:s.displayName,userPhotoUrl:s.userPhotoUrl,commentDate:Date.now(),comment:r,count:o[0]?o[0].count+1:1},e.next=6,L.collection("comments").doc().set(l);case 6:return e.next=8,L.collection("comments").where("postId","==",n).orderBy("commentDate","desc").limit(2).get();case 8:return j=e.sent,b=j.docs,d=b.map((function(e){return{comment:e.data().comment,commentDate:e.data().commentDate,commentDisplayName:e.data().userDisplayName,commentId:e.id,count:e.data().count}})),e.next=13,L.collection("posts").doc(n).set({commentArray:d},{merge:!0});case 13:return a.dispatch(Z(n)),a.dispatch(Oe()),e.abrupt("return",!0);case 18:return e.prev=18,e.t0=e.catch(1),O=e.t0.code,m=e.t0.message,e.abrupt("return",a.rejectWithValue({code:O,message:m}));case 23:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t,a){return e.apply(this,arguments)}}()),Z=Object(N.b)("redux-racstagram/comment/getCommentsThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.collection("comments").where("postId","==",t).orderBy("commentDate","desc").get();case 3:return r=e.sent,n=r.docs,c=n.map((function(e){return Object(v.a)({commentId:e.id},e.data())})),e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(0),s=e.t0.code,o=e.t0.message,e.abrupt("return",a.rejectWithValue({code:s,message:o}));case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()),Y=Object(N.b)("redux-racstagram/comment/deleteCommentsThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.collection("comments").where("postId","==",t).get();case 3:return r=e.sent,n=r.docs,c=n.forEach((function(e){L.collection("comments").doc(e.id).delete()})),e.next=8,Promise.all(c);case 8:return e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(0),s=e.t0.code,o=e.t0.message,e.abrupt("return",a.rejectWithValue({code:s,message:o}));case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()),q=Object(N.b)("redux-racstagram/comment/deleteCommentThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commentId,n=t.postId,e.prev=1,e.next=4,L.collection("comments").doc(r).delete();case 4:return e.next=6,L.collection("comments").where("postId","==",n).orderBy("commentDate","desc").limit(2).get();case 6:return c=e.sent,s=c.docs,o=s.map((function(e){return{comment:e.data().comment,commentDate:e.data().commentDate,commentDisplayName:e.data().userDisplayName,commentId:e.id,count:e.data().count}})),e.next=11,L.collection("posts").doc(n).set({commentArray:o},{merge:!0});case 11:return a.dispatch(Z(n)),a.dispatch(Oe()),e.abrupt("return",!0);case 16:return e.prev=16,e.t0=e.catch(1),u=e.t0.code,l=e.t0.message,e.abrupt("return",a.rejectWithValue({code:u,message:l}));case 21:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t,a){return e.apply(this,arguments)}}()),H=Object(N.c)({name:"redux-racstagram/comment",initialState:{comments:[],setComment:{loading:!1,isSet:!1,setError:""},getComments:{loading:!1,isGet:!1,getError:""},deleteComments:{loading:!1,isDelete:!1,deleteError:""},deleteComment:{loading:!1,isDelete:!1,deleteError:""},updateComment:{loading:!1,isUpdate:!1,updateError:""}},reducers:{},extraReducers:(U={},Object(x.a)(U,q.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{deleteComment:Object(v.a)(Object(v.a)({},e.deleteComment),{},{loading:!0})})})),Object(x.a)(U,q.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{deleteComment:Object(v.a)(Object(v.a)({},e.deleteComment),{},{loading:!1,isDelete:a})})})),Object(x.a)(U,q.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{deleteComment:Object(v.a)(Object(v.a)({},e.deleteComment),{},{loading:!1,deleteError:a})})})),Object(x.a)(U,Y.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{deleteComments:Object(v.a)(Object(v.a)({},e.deleteComments),{},{loading:!0})})})),Object(x.a)(U,Y.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{deleteComments:Object(v.a)(Object(v.a)({},e.deleteComments),{},{loading:!1,isDelete:a})})})),Object(x.a)(U,Y.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{deleteComments:Object(v.a)(Object(v.a)({},e.deleteComments),{},{loading:!1,deleteError:a})})})),Object(x.a)(U,V.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{setComment:Object(v.a)(Object(v.a)({},e.setComment),{},{loading:!0})})})),Object(x.a)(U,V.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{setComment:Object(v.a)(Object(v.a)({},e.setComment),{},{loading:!1,isSet:a})})})),Object(x.a)(U,V.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{setComment:Object(v.a)(Object(v.a)({},e.setComment),{},{loading:!1,setError:a})})})),Object(x.a)(U,Z.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{getComments:Object(v.a)(Object(v.a)({},e.getComments),{},{loading:!0})})})),Object(x.a)(U,Z.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{comments:a,getComments:Object(v.a)(Object(v.a)({},e.getComments),{},{loading:!1,isGet:!0})})})),Object(x.a)(U,Z.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{getComments:Object(v.a)(Object(v.a)({},e.getComments),{},{loading:!1,getError:a})})})),U)}).reducer,J={allLikes:[],userLikes:[],getAllLikes:{isGet:!1,loading:!1,getError:{}},getUserLikes:{isGet:!1,loading:!1,getError:{}},getMoreLikes:{isGet:!1,loading:!1,getError:{},isNone:!1},setLikeOff:{isSet:!1,loading:!1,setError:{}},setLikeOn:{isSet:!1,loading:!1,setError:{}}},$=Object(N.b)("redux-racstagram/like/getMoreLikesThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o,u,l,j,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.postDate,n=t.type,c=t.userName,e.prev=1,s=a.getState(),o=s.profile.currentUser.uid,u=L.collection("likes").orderBy("postDate","desc"),"allPosts"===n||"userPosts"===n&&(u=u.where("userDisplayName","==",c)),e.next=7,u.startAfter(r).limit(6).get();case 7:if(l=e.sent,(j=l.docs).length){e.next=11;break}return e.abrupt("return",{type:"none"});case 11:return b=j.map((function(e){return{postId:e.id,likeCount:e.data().likeCount,isLike:e.data().likeUsers.includes(o)}})),e.abrupt("return",{type:n,likes:b});case 15:return e.prev=15,e.t0=e.catch(1),e.t0.message,e.t0.code,e.abrupt("return",a.rejectWithValue());case 20:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,a){return e.apply(this,arguments)}}()),K=Object(N.b)("redux-racstagram/like/getAllLikesThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=a.getState(),n=r.profile.currentUser.uid,e.next=4,L.collection("likes").orderBy("postDate","desc").limit(6).get();case 4:return c=e.sent,s=c.docs,o=s.map((function(e){return{postId:e.id,likeCount:e.data().likeCount,isLike:e.data().likeUsers.includes(n)}})),e.abrupt("return",o);case 10:return e.prev=10,e.t0=e.catch(0),u=e.t0.code,l=e.t0.message,e.abrupt("return",a.rejectWithValue({code:u,message:l}));case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()),Q=Object(N.b)("redux-racstagram/like/getUserLikesThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=a.getState(),n=r.profile.currentUser.uid,e.next=4,L.collection("likes").where("userDisplayName","==",t).orderBy("postDate","desc").limit(6).get();case 4:return c=e.sent,s=c.docs,o=s.map((function(e){return{postId:e.id,likeCount:e.data().likeCount,isLike:e.data().likeUsers.includes(n)}})),e.abrupt("return",o);case 10:return e.prev=10,e.t0=e.catch(0),u=e.t0.code,l=e.t0.message,e.abrupt("return",a.rejectWithValue({code:u,message:l}));case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()),X=Object(N.b)("redux-racstagram/like/setLikeOnThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o,u,l,j,b,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.postId,n=t.type,e.prev=1,c=a.getState(),s=c.profile.currentUser.uid,o=c.like,u=L.collection("likes").doc(r),e.next=6,u.get();case 6:return l=e.sent,e.next=9,u.set({likeCount:l.data().likeCount+1,likeUsers:[].concat(Object(z.a)(l.data().likeUsers),[s])},{merge:!0});case 9:return j=o[n].map((function(e){return e.postId===r?Object(v.a)(Object(v.a)({},e),{},{likeCount:e.likeCount+1,isLike:!0}):e})),a.dispatch(se({res:j,type:n})),e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(1),b=e.t0.code,d=e.t0.message,e.abrupt("return",a.rejectWithValue({code:b,message:d}));case 19:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,a){return e.apply(this,arguments)}}()),ee=Object(N.b)("redux-racstagram/like/setLikeOffThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o,u,l,j,b,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.postId,n=t.type,e.prev=1,c=a.getState(),s=c.profile.currentUser.uid,o=c.like,u=L.collection("likes").doc(r),e.next=6,u.get();case 6:return l=e.sent,e.next=9,u.set({likeCount:l.data().likeCount-1,likeUsers:l.data().likeUsers.filter((function(e){return e!==s}))},{merge:!0});case 9:return j=o[n].map((function(e){return e.postId===r?Object(v.a)(Object(v.a)({},e),{},{likeCount:e.likeCount-1,isLike:!1}):e})),a.dispatch(oe({res:j,type:n})),e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(1),b=e.t0.code,d=e.t0.message,e.abrupt("return",a.rejectWithValue({code:b,message:d}));case 19:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,a){return e.apply(this,arguments)}}()),te=Object(N.c)({name:"redux-racstagram/like",initialState:J,reducers:{resetGetMoreLikes:function(e){return Object(v.a)(Object(v.a)({},e),{},{getMoreLikes:Object(v.a)({},J.getMoreLikes)})},resetUserLikes:function(e){return Object(v.a)(Object(v.a)({},e),{},{userLikes:Object(z.a)(J.userLikes)})},setLikeOn:function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},Object(x.a)({},a.type,a.res))},setLikeOff:function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},Object(x.a)({},a.type,a.res))}},extraReducers:(w={},Object(x.a)(w,$.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{getMoreLikes:Object(v.a)(Object(v.a)({},e.getMoreLikes),{},{loading:!0})})})),Object(x.a)(w,$.fulfilled,(function(e,t){var a=t.payload;return"allPosts"===a.type?Object(v.a)(Object(v.a)({},e),{},{allLikes:[].concat(Object(z.a)(e.allLikes),Object(z.a)(a.likes)),getMoreLikes:Object(v.a)(Object(v.a)({},e.getMoreLikes),{},{loading:!1,isGet:!0})}):"userPosts"===a.type?Object(v.a)(Object(v.a)({},e),{},{userLikes:[].concat(Object(z.a)(e.userLikes),Object(z.a)(a.likes)),getMoreLikes:Object(v.a)(Object(v.a)({},e.getMoreLikes),{},{loading:!1,isGet:!0})}):"none"===a.type?Object(v.a)(Object(v.a)({},e),{},{getMoreLikes:Object(v.a)(Object(v.a)({},e.getMoreLikes),{},{loading:!1,isGet:!0,isNone:!0})}):void 0})),Object(x.a)(w,$.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{getMoreLikes:Object(v.a)(Object(v.a)({},e.getMoreLikes),{},{loading:!1,getError:a})})})),Object(x.a)(w,K.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{getAllLikes:Object(v.a)(Object(v.a)({},e.getAllLikes),{},{loading:!0})})})),Object(x.a)(w,K.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{allLikes:a,getAllLikes:Object(v.a)(Object(v.a)({},e.getAllLikes),{},{loading:!1,isGet:!0})})})),Object(x.a)(w,K.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{getLikes:Object(v.a)(Object(v.a)({},e.getLikes),{},{loading:!1,getError:a})})})),Object(x.a)(w,Q.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{getUserLikes:Object(v.a)(Object(v.a)({},e.getUserLikes),{},{loading:!0})})})),Object(x.a)(w,Q.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{userLikes:a,getUserLikes:Object(v.a)(Object(v.a)({},e.getUserLikes),{},{loading:!1,isGet:!0})})})),Object(x.a)(w,Q.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{getUserLikes:Object(v.a)(Object(v.a)({},e.getUserLikes),{},{loading:!1,getError:a})})})),Object(x.a)(w,X.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{setLikeOn:Object(v.a)(Object(v.a)({},e.setLikeOn),{},{loading:!0})})})),Object(x.a)(w,X.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{setLikeOn:Object(v.a)(Object(v.a)({},e.setLikeOn),{},{loading:!1,isSet:a})})})),Object(x.a)(w,X.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{setLikeOn:Object(v.a)(Object(v.a)({},e.setLikeOn),{},{loading:!1,setError:a})})})),Object(x.a)(w,ee.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{setLikeOff:Object(v.a)(Object(v.a)({},e.setLikeOff),{},{loading:!0})})})),Object(x.a)(w,ee.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{setLikeOff:Object(v.a)(Object(v.a)({},e.setLikeOff),{},{loading:!1,isSet:a})})})),Object(x.a)(w,ee.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{setLikeOff:Object(v.a)(Object(v.a)({},e.setLikeOff),{},{loading:!1,setError:a})})})),w)}),ae=te.reducer,re=te.actions,ne=re.resetGetMoreLikes,ce=re.resetUserLikes,se=re.setLikeOn,oe=re.setLikeOff,ie={allPosts:[],userPosts:[],prevScrollY:0,getMorePosts:{isGet:!1,loading:!1,getError:{},isNone:!1},getAllPosts:{isGet:!1,loading:!1,getError:{}},getUserPosts:{isGet:!1,loading:!1,getError:{}},createPost:{isSet:!1,loading:!1,setError:{}},updatePost:{isUpdate:!1,loading:!1,updateError:{}},deletePost:{isDelete:!1,loading:!1,deleteError:{}},updatePostsUserInfo:{isUpdate:!1,loading:!1,updateError:{}}},ue=Object(N.b)("redux-racstagram/post/updatePostsUserInfoThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o,u,l,j,b,d,O,m,p,f,g,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.userPhotoUrl,n=t.userDisplayName,c=a.getState(),s=c.profile.currentUser,e.next=5,L.collection("posts").where("userId","==",s.uid).get();case 5:o=e.sent,u=o.docs,l=Object(z.a)(u),j=!0,b=!1,e.prev=10,O=Object(B.a)(l);case 12:return e.next=14,O.next();case 14:return m=e.sent,j=m.done,e.next=18,m.value;case 18:if(p=e.sent,j){e.next=25;break}f=p,L.collection("posts").doc(f.id).update(Object(v.a)(Object(v.a)({},r&&{userPhotoUrl:r}),n&&{userDisplayName:n}));case 22:j=!0,e.next=12;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(10),b=!0,d=e.t0;case 31:if(e.prev=31,e.prev=32,j||null==O.return){e.next=36;break}return e.next=36,O.return();case 36:if(e.prev=36,!b){e.next=39;break}throw d;case 39:return e.finish(36);case 40:return e.finish(31);case 41:return e.abrupt("return",!0);case 44:return e.prev=44,e.t1=e.catch(0),g=e.t1.code,h=e.t1.message,e.abrupt("return",a.rejectWithValue({code:g,message:h}));case 49:case"end":return e.stop()}}),e,null,[[0,44],[10,27,31,41],[32,,36,40]])})));return function(t,a){return e.apply(this,arguments)}}()),le=Object(N.b)("redux-racstagram/post/updatePostThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o,u,l,j,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.getState();case 3:if(r=e.sent,n=r.profile.currentUser,c=r.image.imageUrl,s=t.postId,o=t.text,u=t.prevImageUrl,l=t.imageBase64,t.userId!==n.uid){e.next=15;break}return u!==l&&a.dispatch(F(u)),e.next=11,L.collection("posts").doc(s).update(Object(v.a)(Object(v.a)({},c&&{postImageUrl:c}),o&&{postText:o}));case 11:a.dispatch(Oe()),a.dispatch(W()),e.next=16;break;case 15:throw new Error("Invalid user access!");case 16:return e.abrupt("return",!0);case 19:return e.prev=19,e.t0=e.catch(0),j=e.t0.code,b=e.t0.message,e.abrupt("return",a.rejectWithValue({code:j,message:b}));case 24:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,a){return e.apply(this,arguments)}}()),je=Object(N.b)("redux-racstagram/post/deletePostThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.getState();case 3:if(r=e.sent,n=r.profile.currentUser,c=t.postId,s=t.postImageUrl,t.userId!==n.uid){e.next=16;break}return e.next=9,L.collection("posts").doc(c).delete();case 9:if(a.dispatch(Y(c)),L.collection("likes").doc(c).delete(),""===s){e.next=14;break}return e.next=14,a.dispatch(F(s));case 14:e.next=17;break;case 16:throw new Error("Invalid user access!");case 17:return e.next=19,a.dispatch(W());case 19:return e.abrupt("return",!0);case 22:return e.prev=22,e.t0=e.catch(0),o=e.t0.code,u=e.t0.message,e.abrupt("return",a.rejectWithValue({code:o,message:u}));case 27:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t,a){return e.apply(this,arguments)}}()),be=Object(N.b)("redux-racstagram/post/createPostThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o,u,l,j,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.getState();case 3:return r=e.sent,n=r.profile.currentUser,c=r.image.imageUrl,s=r.users.currentUserInfo,o=Date.now(),u={postText:t,postDate:o,userId:n.uid,userPhotoUrl:s.userPhotoUrl,userDisplayName:s.displayName,postImageUrl:c,commentArray:[]},l=Object(k.a)(),e.next=12,Promise.all([L.collection("posts").doc(l).set(u),L.collection("likes").doc(l).set({postId:l,userDisplayName:s.displayName,postDate:o,likeCount:0,likeUsers:[]})]);case 12:return e.next=14,a.dispatch(W());case 14:return e.abrupt("return",!0);case 17:return e.prev=17,e.t0=e.catch(0),j=e.t0.code,b=e.t0.message,e.abrupt("return",a.rejectWithValue({code:j,message:b}));case 22:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,a){return e.apply(this,arguments)}}()),de=Object(N.b)("redux-racstagram/post/getMorePostsThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o,u,l,j,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.postDate,n=t.type,c=t.userName,e.prev=1,a.dispatch($({postDate:r,type:n,userName:c})),s=L.collection("posts").orderBy("postDate","desc"),"allPosts"===n||"userPosts"===n&&(s=s.where("userDisplayName","==",c)),e.next=7,s.startAfter(r).limit(6).get();case 7:if(o=e.sent,(u=o.docs).length){e.next=11;break}return e.abrupt("return",{type:"none"});case 11:return l=u.map((function(e){return Object(v.a)({postId:e.id},e.data())})),e.abrupt("return",{posts:l,type:n});case 15:return e.prev=15,e.t0=e.catch(1),j=e.t0.code,b=e.t0.message,e.abrupt("return",a.rejectWithValue({code:j,message:b}));case 20:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,a){return e.apply(this,arguments)}}()),Oe=Object(N.b)("redux-racstagram/post/getAllPostsThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.dispatch(K()),e.next=4,L.collection("posts").orderBy("postDate","desc").limit(6).get();case 4:return r=e.sent,n=r.docs,c=n.map((function(e){return Object(v.a)({postId:e.id},e.data())})),e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(0),s=e.t0.code,o=e.t0.message,e.abrupt("return",a.rejectWithValue({code:s,message:o}));case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()),me=Object(N.b)("redux-racstagram/post/getUserPostsThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.dispatch(Q(t)),e.next=4,L.collection("posts").where("userDisplayName","==",t).orderBy("postDate","desc").limit(6).get();case 4:return r=e.sent,n=r.docs,c=n.map((function(e){return Object(v.a)({postId:e.id},e.data())})),e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(0),s=e.t0.code,o=e.t0.message,e.abrupt("return",a.rejectWithValue({code:s,message:o}));case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()),pe=Object(N.c)({name:"redux-racstagram/post",initialState:ie,reducers:{resetUserPosts:function(e){return Object(v.a)(Object(v.a)({},e),{},{userPosts:ie.userPosts})},resetGetMorePosts:function(e){return Object(v.a)(Object(v.a)({},e),{},{getMorePosts:Object(v.a)({},ie.getMorePosts)})},setPrevScrollY:function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{prevScrollY:a})},resetGetUserPosts:function(e){return Object(v.a)(Object(v.a)({},e),{},{getUserPosts:Object(v.a)({},ie.getUserPosts)})}},extraReducers:(_={},Object(x.a)(_,ue.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{updatePostUserInfo:Object(v.a)(Object(v.a)({},e.updatePostUserInfo),{},{loading:!0})})})),Object(x.a)(_,ue.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{updatePostUserInfo:Object(v.a)(Object(v.a)({},e.updatePostUserInfo),{},{loading:!1,isUpdate:a})})})),Object(x.a)(_,ue.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{updatePostUserInfo:Object(v.a)(Object(v.a)({},e.updatePostUserInfo),{},{loading:!1,updateError:a})})})),Object(x.a)(_,be.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{createPost:Object(v.a)(Object(v.a)({},e.createPost),{},{loading:!0})})})),Object(x.a)(_,be.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{createPost:Object(v.a)(Object(v.a)({},e.createPost),{},{loading:!1,isSet:a})})})),Object(x.a)(_,be.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{createPost:Object(v.a)(Object(v.a)({},e.createPost),{},{loading:!1,setError:a})})})),Object(x.a)(_,Oe.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{getAllPosts:Object(v.a)(Object(v.a)({},e.getAllPosts),{},{loading:!0})})})),Object(x.a)(_,Oe.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{allPosts:a,getAllPosts:Object(v.a)(Object(v.a)({},e.getAllPosts),{},{loading:!1,isGet:!0})})})),Object(x.a)(_,Oe.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{getAllPosts:Object(v.a)(Object(v.a)({},e.getAllPosts),{},{loading:!1,getError:a})})})),Object(x.a)(_,de.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{getMorePosts:Object(v.a)(Object(v.a)({},e.getMorePosts),{},{loading:!0})})})),Object(x.a)(_,de.fulfilled,(function(e,t){var a=t.payload;return"allPosts"===a.type?Object(v.a)(Object(v.a)({},e),{},{allPosts:[].concat(Object(z.a)(e.allPosts),Object(z.a)(a.posts)),getMorePosts:Object(v.a)(Object(v.a)({},e.getMorePosts),{},{loading:!1,isGet:!0})}):"userPosts"===a.type?Object(v.a)(Object(v.a)({},e),{},{userPosts:[].concat(Object(z.a)(e.userPosts),Object(z.a)(a.posts)),getMorePosts:Object(v.a)(Object(v.a)({},e.getMorePosts),{},{loading:!1,isGet:!0})}):"none"===a.type?Object(v.a)(Object(v.a)({},e),{},{getMorePosts:Object(v.a)(Object(v.a)({},e.getMorePosts),{},{loading:!1,isGet:!0,isNone:!0})}):void 0})),Object(x.a)(_,de.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{getMorePosts:Object(v.a)(Object(v.a)({},e.getMorePosts),{},{loading:!1,getError:a})})})),Object(x.a)(_,me.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{getUserPosts:Object(v.a)(Object(v.a)({},e.getUserPosts),{},{loading:!0})})})),Object(x.a)(_,me.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{userPosts:a,getUserPosts:Object(v.a)(Object(v.a)({},e.getUserPosts),{},{loading:!1,isGet:!0})})})),Object(x.a)(_,me.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{getUserPosts:Object(v.a)(Object(v.a)({},e.getUserPosts),{},{loading:!1,getError:a})})})),Object(x.a)(_,je.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{deletePost:Object(v.a)(Object(v.a)({},e.deletePost),{},{loading:!0})})})),Object(x.a)(_,je.fulfilled,(function(e,t){t.payload;return Object(v.a)(Object(v.a)({},e),{},{deletePost:Object(v.a)(Object(v.a)({},e.deletePost),{},{loading:!1,isDelete:!0})})})),Object(x.a)(_,je.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{deletePost:Object(v.a)(Object(v.a)({},e.deletePost),{},{loading:!1,deleteError:a})})})),Object(x.a)(_,le.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{updatePost:Object(v.a)(Object(v.a)({},e.updatePost),{},{loading:!0})})})),Object(x.a)(_,le.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{updatePost:Object(v.a)(Object(v.a)({},e.updatePost),{},{isUpdate:a,loading:!1})})})),Object(x.a)(_,le.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{updatePost:Object(v.a)(Object(v.a)({},e.updatePost),{},{loading:!1,updateError:a})})})),_)}),fe=pe.reducer,ge=pe.actions,he=ge.resetPost,xe=(ge.setPostFormError,ge.resetGetMorePosts),ve=ge.setPrevScrollY,Ne=(ge.resetGetUserPosts,ge.resetUserPosts),ke=function(e,t,a){if(e>t-1||void 0===a)return[];for(var r=new Set;r.size<e;){var n=Math.floor(Math.random()*t)+1;n!==a&&r.add(n)}return Object(z.a)(r)},ye={currentUserInfo:{userPhotoUrl:"",userIntro:"",displayName:"",subDisplayName:"",website:""},userInfo:{userId:"",userPhotoUrl:"",userDisplayName:"",userIntro:""},randomUserInfo:[],userMaxCount:0,getCurrentUserInfo:{isGet:!1,loading:!1,getError:""},getUserInfo:{isGet:!1,loading:!1,getError:""},getRandomUserInfo:{isGet:!1,loading:!1,getError:""},setCurrentUserInfo:{isSet:!1,loading:!1,setError:""},checkDisplayName:{loading:!1,isCheck:!1,checkError:"",exist:[!1,""]},getUserMaxCount:{isGet:!1,loading:!1,getError:""}},Ie=Object(N.b)("redux-racstagram/users/getUserMaxCountThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.collection("users").orderBy("count","desc").limit(1).get();case 3:return r=e.sent,n=r.docs,c=n.length?n[0].data():{count:-1},e.abrupt("return",c.count);case 9:return e.prev=9,e.t0=e.catch(0),s=e.t0.code,o=e.t0.message,e.abrupt("return",a.rejectWithValue({code:s,message:o}));case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()),Ue=Object(N.b)("redux-racstagram/users/getRandomUserInfoThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o,u,l,j,b,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.dispatch(Ie());case 3:return e.next=5,a.getState();case 5:if(r=e.sent,n=r.users,c=n.currentUserInfo.count,-1!==(s=n.userMaxCount)){e.next=11;break}return e.abrupt("return",[]);case 11:return o=ke(2,s,c),e.next=14,L.collection("users").where("count","in",o).get();case 14:return u=e.sent,l=u.docs,j=l.map((function(e){var t=e.data();return{displayName:t.displayName,userPhotoUrl:t.userPhotoUrl}})),e.abrupt("return",j);case 20:return e.prev=20,e.t0=e.catch(0),b=e.t0.code,d=e.t0.message,e.abrupt("return",a.rejectWithValue({code:b,message:d}));case 25:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,a){return e.apply(this,arguments)}}()),we=Object(N.b)("redux-racstagram/users/checkDisplayNameThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.collection("users").where("displayName","==",t).get();case 3:return r=e.sent,n=r.docs,c=[!!n[0],t],e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(0),s=e.t0.code,o=e.t0.message,e.abrupt("return",a.rejectWithValue({code:s,message:o}));case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()),_e=Object(N.b)("redux-racstagram/users/getUserInfoThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.collection("users").where("displayName","==",t).get();case 3:return r=e.sent,n=r.docs,c=Object(v.a)(Object(v.a)({},n[0].data()),{},{userId:n[0].id}),e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(0),s=e.t0.code,o=e.t0.message,e.abrupt("return",a.rejectWithValue({code:s,message:o}));case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()),Ce=Object(N.b)("redux-racstagram/users/setCurrentUserInfoThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o,u,l,j,b,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.getState(),n=r.profile.currentUser,c=t.userPhotoUrl,s=t.displayName,o=t.userIntro,u=t.subDisplayName,l=t.website,j=t.count,e.prev=2,e.next=5,L.collection("users").doc(n.uid).set(Object(v.a)(Object(v.a)(Object(v.a)(Object(v.a)(Object(v.a)(Object(v.a)({},c&&{userPhotoUrl:c}),s&&{displayName:s}),u?{subDisplayName:u}:{subDisplayName:""}),o?{userIntro:o}:{userIntro:""}),l?{website:l}:{website:""}),j&&{count:j}),{merge:!0});case 5:return e.next=7,a.dispatch(Pe());case 7:return e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(2),b=e.t0.error,d=e.t0.code,e.abrupt("return",a.rejectWithValue({error:b,code:d}));case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}()),Pe=Object(N.b)("redux-racstagram/users/getCurrentUserInfoThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=a.getState(),n=r.profile.currentUser,e.next=4,L.collection("users").doc(n.uid).get();case 4:return c=e.sent,e.abrupt("return",Object(v.a)({},c.data()));case 8:return e.prev=8,e.t0=e.catch(0),s=e.t0.code,o=e.t0.message,e.abrupt("return",a.rejectWithValue({code:s,message:o}));case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}()),Se=Object(N.c)({name:"redux-racstagram/users",initialState:ye,reducers:{resetUsers:function(){return Object(v.a)({},ye)},resetUserInfo:function(e){return Object(v.a)(Object(v.a)({},e),{},{userInfo:ye.userInfo})}},extraReducers:(C={},Object(x.a)(C,we.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{checkDisplayName:Object(v.a)(Object(v.a)({},e.checkDisplayName),{},{loading:!0})})})),Object(x.a)(C,we.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{checkDisplayName:Object(v.a)(Object(v.a)({},e.checkDisplayName),{},{loading:!1,isCheck:!0,exist:a})})})),Object(x.a)(C,we.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{checkDisplayName:Object(v.a)(Object(v.a)({},e.checkDisplayName),{},{loading:!1,checkError:a})})})),Object(x.a)(C,_e.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{getUserInfo:Object(v.a)(Object(v.a)({},e.getUserInfo),{},{loading:!0})})})),Object(x.a)(C,_e.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{userInfo:a,getUserInfo:Object(v.a)(Object(v.a)({},e.getUserInfo),{},{loading:!1,isGet:!0})})})),Object(x.a)(C,_e.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{getUserInfo:Object(v.a)(Object(v.a)({},e.getUserInfo),{},{loading:!1,getError:a})})})),Object(x.a)(C,Ce.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{setCurrentUserInfo:Object(v.a)(Object(v.a)({},e.setCurrentUserInfo),{},{loading:!0})})})),Object(x.a)(C,Ce.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{setCurrentUserInfo:Object(v.a)(Object(v.a)({},e.setCurrentUserInfo),{},{loading:!1,isSet:a})})})),Object(x.a)(C,Ce.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{setCurrentUserInfo:Object(v.a)(Object(v.a)({},e.setCurrentUserInfo),{},{loading:!1,setError:a})})})),Object(x.a)(C,Pe.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{getCurrentUserInfo:Object(v.a)(Object(v.a)({},e.getCurrentUserInfo),{},{loading:!0})})})),Object(x.a)(C,Pe.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{currentUserInfo:Object(v.a)(Object(v.a)({},e.currentUserInfo),a),getCurrentUserInfo:Object(v.a)(Object(v.a)({},e.getCurrentUserInfo),{},{loading:!1,isGet:!0})})})),Object(x.a)(C,Pe.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{getCurrentUserInfo:Object(v.a)(Object(v.a)({},e.getCurrentUserInfo),{},{loading:!1,getError:a})})})),Object(x.a)(C,Ue.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{getRandomUserInfo:Object(v.a)(Object(v.a)({},e.getRandomUserInfo),{},{loading:!0})})})),Object(x.a)(C,Ue.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{randomUserInfo:a,getRandomUserInfo:Object(v.a)(Object(v.a)({},e.getRandomUserInfo),{},{loading:!1,isGet:!0})})})),Object(x.a)(C,Ue.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{getRandomUserInfo:Object(v.a)(Object(v.a)({},e.getRandomUserInfo),{},{loading:!1,getError:a})})})),Object(x.a)(C,Ie.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{getUserMaxCount:Object(v.a)(Object(v.a)({},e.getUserMaxCount),{},{loading:!0})})})),Object(x.a)(C,Ie.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{userMaxCount:a,getUserMaxCount:Object(v.a)(Object(v.a)({},e.getUserMaxCount),{},{loading:!1,isGet:!0})})})),Object(x.a)(C,Ie.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{getUserMaxCount:Object(v.a)(Object(v.a)({},e.getUserMaxCount),{},{loading:!1,getError:a})})})),C)}),De=Se.reducer,Ee=Se.actions,Le=Ee.resetUsers,Te=Ee.resetUserInfo,Me={updateProfile:{loading:!1,isUpdate:!1,updateError:""},currentUser:{isSignIn:!1,uid:""}},Ae=Object(N.b)("redux-racstagram/profile/updateProfileThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o,u,l,j,b,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getState();case 2:if(r=e.sent,n=r.image.imageUrl,c=t.displayName,s=t.imageBase64,o=t.prevImageUrl,u=t.userIntro,l=t.subDisplayName,j=t.website,o!==s&&a.dispatch(F(o)),e.prev=6,!(u||c||s)){e.next=13;break}return e.next=10,Promise.all([a.dispatch(Ce({userIntro:u,displayName:c,userPhotoUrl:n,subDisplayName:l,website:j})),a.dispatch(ue({userDisplayName:c,userPhotoUrl:n}))]);case 10:return e.next=12,a.dispatch(W());case 12:a.dispatch(Oe());case 13:return e.abrupt("return",!0);case 16:return e.prev=16,e.t0=e.catch(6),b=e.t0.code,d=e.t0.message,e.abrupt("return",a.rejectWithValue({code:b,message:d}));case 21:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t,a){return e.apply(this,arguments)}}()),Fe=Object(N.c)({name:"redux-racstagram/profile",initialState:Me,reducers:{resetProfile:function(){return Object(v.a)({},Me)},setCurrentUser:{reducer:function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{currentUser:Object(v.a)(Object(v.a)({},e.currentUser),a)})},prepare:function(e){var t=e.uid;return{payload:t?Object(v.a)(Object(v.a)({},t&&{uid:t}),{},{isSignIn:!0}):Object(v.a)({},Me.currentUser)}}}},extraReducers:(P={},Object(x.a)(P,Ae.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{updateProfile:Object(v.a)(Object(v.a)({},e.updateProfile),{},{loading:!0})})})),Object(x.a)(P,Ae.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{updateProfile:Object(v.a)(Object(v.a)({},e.updateProfile),{},{loading:!1,isUpdate:a})})})),Object(x.a)(P,Ae.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{updateProfile:Object(v.a)(Object(v.a)({},e.updateProfile),{},{loading:!1,updateError:a})})})),P)}),Ge=Fe.reducer,Re=Fe.actions,We=Re.setCurrentUser,ze=Re.resetProfile,Be={errorSelector:"",emailSignUp:{isSignUp:!1,loading:!1,signUpError:""},emailSignIn:{isSignIn:!1,loading:!1,signInError:""},socialSignIn:{isSignIn:!1,loading:!1,signInError:""},signOut:{isSignOut:!1,loading:!1,signOutError:""}},Ve="https://firebasestorage.googleapis.com/v0/b/rwitter-914af.appspot.com/o/user_icon.png?alt=media&token=f4e74544-2aff-4657-aa59-117adb4aad65",Ze=Object(N.b)("redux-racstagram/auth/signOutThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([E.signOut(),a.dispatch(he()),a.dispatch(W()),a.dispatch(ze()),a.dispatch(Le())]);case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),r=e.t0.code,n=e.t0.message,e.abrupt("return",a.rejectWithValue({code:r,message:n}));case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}()),Ye=Object(N.b)("redux-racstagram/auth/emailSignUpThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.email,n=t.password,e.next=4,E.createUserWithEmailAndPassword(r,n);case 4:return e.next=6,a.dispatch(qe(t));case 6:return e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),c=e.t0.code,s=e.t0.message,a.dispatch(Xe(c)),e.abrupt("return",a.rejectWithValue({code:c,message:s}));case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()),qe=Object(N.b)("redux-racstagram/auth/emailSignInThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.email,n=t.password,c=t.displayName,e.next=4,E.signInWithEmailAndPassword(r,n);case 4:if(!c){e.next=13;break}return s=a.getState(),o=s.users.userMaxCount,e.next=8,a.dispatch(Ie());case 8:return e.next=10,a.dispatch(Ce({displayName:c,userPhotoUrl:Ve,count:-1===o?1:o+1}));case 10:return e.next=12,a.dispatch(Pe());case 12:a.dispatch(Ue());case 13:return e.abrupt("return",!0);case 16:return e.prev=16,e.t0=e.catch(0),u=e.t0.code,l=e.t0.message,a.dispatch(Xe(u)),e.abrupt("return",a.rejectWithValue({code:u,message:l}));case 22:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,a){return e.apply(this,arguments)}}()),He=Object(N.b)("redux-racstagram/auth/SocialSignInThunk",function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,c,s,o,u,l,j,b,d,O,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.setPersistence(D.auth.Auth.Persistence.SESSION);case 3:return"google"===t?r=new D.auth.GoogleAuthProvider:"github"===t&&(r=new D.auth.GithubAuthProvider),r.addScope("profile"),n=Object(k.a)(),e.next=8,E.signInWithPopup(r);case 8:return c=e.sent,s=c.user,o=s.photoURL,u=s.displayName,e.next=14,a.dispatch(Pe());case 14:return e.next=16,a.getState();case 16:if(l=e.sent,(j=l.users.currentUserInfo).displayName&&j.userPhotoUrl&&j.count){e.next=27;break}return e.next=21,a.dispatch(Ie());case 21:return b=a.getState(),d=b.users.userMaxCount,e.next=24,a.dispatch(Ce({userPhotoUrl:o||Ve,displayName:u||n,count:-1===d?1:d+1}));case 24:return e.next=26,a.dispatch(Pe());case 26:a.dispatch(Ue());case 27:return e.abrupt("return",!0);case 30:return e.prev=30,e.t0=e.catch(0),O=e.t0.code,m=e.t0.message,a.dispatch(Xe(O)),e.abrupt("return",a.rejectWithValue({code:O,message:m}));case 36:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t,a){return e.apply(this,arguments)}}()),Je=Object(N.c)({name:"redux-racstagram/auth",initialState:Be,reducers:{resetAuth:function(e){return Object(v.a)({},Be)},selectError:function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{errorSelector:a})}},extraReducers:(S={},Object(x.a)(S,qe.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{emailSignIn:Object(v.a)(Object(v.a)({},e.emailSignIn),{},{loading:!0})})})),Object(x.a)(S,qe.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{emailSignIn:Object(v.a)(Object(v.a)({},e.emailSignIn),{},{loading:!1,isSignIn:a})})})),Object(x.a)(S,qe.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{emailSignIn:Object(v.a)(Object(v.a)({},e.emailSignIn),{},{loading:!1,signInError:a})})})),Object(x.a)(S,He.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{socialSignIn:Object(v.a)(Object(v.a)({},e.socialSignIn),{},{loading:!0})})})),Object(x.a)(S,He.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{socialSignIn:Object(v.a)(Object(v.a)({},e.socialSignIn),{},{loading:!1,isSignIn:a})})})),Object(x.a)(S,He.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{socialSignIn:Object(v.a)(Object(v.a)({},e.socialSignIn),{},{loading:!1,signInError:a})})})),Object(x.a)(S,Ye.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{emailSignUp:Object(v.a)(Object(v.a)({},e.emailSignUp),{},{loading:!0})})})),Object(x.a)(S,Ye.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{emailSignUp:Object(v.a)(Object(v.a)({},e.emailSignUp),{},{loading:!1,isSignUp:a})})})),Object(x.a)(S,Ye.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{emailSignUp:Object(v.a)(Object(v.a)({},e.emailSignUp),{},{loading:!1,signUpError:a})})})),Object(x.a)(S,Ze.pending,(function(e){return Object(v.a)(Object(v.a)({},e),{},{signOut:Object(v.a)(Object(v.a)({},e.signOut),{},{loading:!0})})})),Object(x.a)(S,Ze.fulfilled,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{signOut:Object(v.a)(Object(v.a)({},e.signOut),{},{loading:!1,isSignOut:a})})})),Object(x.a)(S,Ze.rejected,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{signOut:Object(v.a)(Object(v.a)({},e.signOut),{},{loading:!1,signOutError:a})})})),S)}),$e=Je.reducer,Ke=Je.actions,Qe=Ke.resetAuth,Xe=Ke.selectError,et=(Ke.setNewAccount,function(){var e=Object(l.b)(),t=Object(r.useCallback)((function(t){var a=t.target.name;e(He(a))}),[e]);return Object(m.jsx)(h,{onSocialClick:t})}),tt=a(180),at=a(176),rt=a(177),nt=(a(117),a(175)),ct=Object(nt.a)({input:{"& input + fieldset":{borderColor:function(e){return e.color}},"& input:valid:focus + fieldset":{borderColor:function(e){return e.color}},"& input:valid:hover + fieldset":{borderColor:function(e){return e.color}}},helperText:{color:function(e){return e.color}}}),st=function(e){var t=!1;e?t=!!/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/.test(e):t=!1;return t},ot=function(e){var t=!1;e?t=!!/^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/.test(e):t=!1;return t},it=function(e,t){var a=Object(l.c)((function(e){return e.users.checkDisplayName.exist})),r="",n="",c="";switch(r=e===t?"default":t?a[1]&&t===a[1]?a[0]?"error":"success":"warning":"empty"){case"empty":n="orange",c="\uc774\ub984\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694";break;case"warning":n="orange",c="\uc911\ubcf5 \ud655\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.";break;case"success":n="green",c="".concat(a[1],"\ub294 \uc0ac\uc6a9\uac00\ub2a5 \ud569\ub2c8\ub2e4.");break;case"error":n="red",c="".concat(a[1],"\ub294 \uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uc774\ub984\uc785\ub2c8\ub2e4.");break;default:n="rgba(0, 0, 0, 0.3)",c=""}return{input:ct({color:n}).input,helperText:ct({color:n}).helperText,helperTextMessage:c,code:r}},ut=function(e){var t=e.onChange,a=e.inputs,r=e.onSubmit,n=e.newAccount,c=e.emailSignIn,s=e.emailSignUp,o=e.socialSignIn,i=a.email,u=a.password,l=a.displayName,j=it(null,l);return Object(m.jsxs)("form",{onSubmit:r,className:"auth_form",children:[Object(m.jsx)(tt.a,{variant:"outlined",name:"email",type:"email",value:i,onChange:t,className:"input",label:"Email",size:"small"}),Object(m.jsx)(tt.a,{className:"input",variant:"outlined",name:"password",type:"password",label:"Password",size:"small",value:u,onChange:t}),n?Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(tt.a,{className:"displayName_input",variant:"outlined",name:"displayName",label:"User Name",type:"text",size:"small",value:l,onChange:t,helperText:j.helperTextMessage,InputProps:{className:j.input},FormHelperTextProps:{className:j.helperText}})}):Object(m.jsx)(m.Fragment,{}),c||s||o?Object(m.jsx)(at.a,{}):Object(m.jsx)(rt.a,{variant:"contained",color:"primary",className:"auth_btn",type:"submit",disableElevation:!0,disabled:n?!("success"===j.code&&ot(i)&&st(u)):!(ot(i)&&st(u)),children:n?"\uac00\uc785\ud558\uae30":"\ub85c\uadf8\uc778"})]})},lt=a(43),jt=function(e){var t=e.newAccount,a=Object(l.b)(),n=Object(l.c)((function(e){return e.auth})),c=n.emailSignUp,s=n.emailSignIn,o=n.socialSignIn,i=Object(r.useState)({email:"",password:"",displayName:""}),u=Object(d.a)(i,2),j=u[0],b=u[1];Object(r.useEffect)((function(){return function(){b({email:"",password:"",displayName:""})}}),[t]);var O=Object(r.useCallback)((function(e){a(we(e))}),[a]),p=Object(r.useMemo)((function(){return Object(lt.debounce)((function(e){O(e)}),500)}),[O]),f=Object(r.useCallback)((function(e){var t=e.target,a=t.name,r=t.value;"email"===a?b(Object(v.a)(Object(v.a)({},j),{},{email:r})):"password"===a?b(Object(v.a)(Object(v.a)({},j),{},{password:r})):"displayName"===a&&(b(Object(v.a)(Object(v.a)({},j),{},{displayName:r})),p(r))}),[j,p]),g=Object(r.useCallback)((function(e){e.preventDefault(),a(!1===t?qe(j):Ye(j))}),[j,a,t]);return Object(m.jsx)(ut,{onChange:f,inputs:j,onSubmit:g,newAccount:t,emailSignIn:s.loading,emailSignUp:c.loading,socialSignIn:o.loading})},bt=(a(119),function(){var e=Object(l.b)(),t=Object(r.useState)(!1),a=Object(d.a)(t,2),n=a[0],c=a[1],s=function(){c(!n),e(Xe(""))};return Object(r.useEffect)((function(){return function(){e(Qe())}}),[e]),Object(m.jsxs)("div",{className:"auth",children:[Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("h2",{className:"title",children:"Racstagram"}),Object(m.jsx)(jt,{newAccount:n}),Object(m.jsx)(p,{className:"error"}),n?Object(m.jsx)(m.Fragment,{}):Object(m.jsx)(et,{})]}),Object(m.jsx)("div",{className:"container",children:n?Object(m.jsxs)("div",{children:["\uacc4\uc815\uc774 \uc788\uc73c\uc2e0\uac00\uc694?",Object(m.jsx)("span",{className:"mode",onClick:s,children:"\ub85c\uadf8\uc778"})]}):Object(m.jsxs)("div",{children:["\uacc4\uc815\uc774 \uc5c6\uc73c\uc2e0\uac00\uc694?",Object(m.jsx)("span",{className:"mode",onClick:s,children:"\ud68c\uc6d0\uac00\uc785"})]})})]})}),dt=(a(120),function(e){var t=e.children,a=e.isOn,n=e.toggle,c=e.message,o=Object(r.useState)(!1),i=Object(d.a)(o,2),u=i[0],l=i[1];if(Object(r.useEffect)((function(){l(!0)}),[]),!u)return Object(m.jsx)(m.Fragment,{});var j=document.querySelector(".modal_root");return s.a.createPortal(a?Object(m.jsxs)("div",{className:"confirm",children:[Object(m.jsx)("div",{className:"confirm_background",onClick:n}),Object(m.jsxs)("div",{className:"confirm_container",children:[Object(m.jsx)(O.a,{severity:"warning",className:"message",children:c}),Object(m.jsx)("div",{className:"confirm_items",children:t})]})]}):Object(m.jsx)(m.Fragment,{}),j)}),Ot=(a(121),a(88)),mt=a.n(Ot),pt=function(e){var t=e.commentObj,a=e.postId,n=t.commentId,c=t.comment,s=t.userDisplayName,o=t.userPhotoUrl,i=t.userId,u=Object(l.c)((function(e){return e.profile.currentUser.uid})),b=Object(l.b)(),O=Object(r.useState)(!1),p=Object(d.a)(O,2),f=p[0],g=p[1],h=function(){g(!f)},x=Object(r.useCallback)((function(){b(q({commentId:n,postId:a}))}),[b,n,a]);return Object(m.jsxs)("li",{className:"comment_container",children:[Object(m.jsx)("img",{src:o,alt:"user_image",className:"user_image"}),Object(m.jsx)("div",{className:"comment_info",children:Object(m.jsxs)("span",{className:"comment",children:[Object(m.jsx)(j.b,{to:"/user/".concat(s),className:"comment_user_name",children:s}),c]})}),u===i&&Object(m.jsx)("button",{onClick:h,className:"delete_comment_btn",children:Object(m.jsx)(mt.a,{className:"icon"})}),Object(m.jsxs)(dt,{isOn:f,toggle:h,message:"\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",children:[Object(m.jsx)("button",{className:"confirm_item",onClick:x,children:"\uc608"}),Object(m.jsx)("button",{className:"confirm_item",onClick:h,children:"\uc544\ub2c8\uc624"})]})]},n)},ft=(a(124),function(e){var t=e.onChange,a=e.comment,r=e.onSubmit;return Object(m.jsxs)("form",{className:"comment_form",onSubmit:r,children:[Object(m.jsx)(tt.a,{onChange:t,value:a,label:"\ub313\uae00",variant:"outlined",className:"comment_input",size:"small"}),Object(m.jsx)("button",{type:"submit",className:"comment_submit",disabled:!a,children:"\uc791\uc131"})]})}),gt=function(e){var t=e.postId,a=Object(l.b)(),n=Object(r.useState)(""),c=Object(d.a)(n,2),s=c[0],o=c[1],i=Object(r.useCallback)((function(e){var t=e.target.value;o(t)}),[]),u=Object(r.useCallback)((function(e){e.preventDefault(),a(V({postId:t,comment:s})),o("")}),[a,t,s]);return Object(m.jsx)(ft,{onChange:i,comment:s,onSubmit:u})},ht=(a(125),function(e){var t=e.onSignOutClick,a=Object(r.useState)(!1),n=Object(d.a)(a,2),c=n[0],s=n[1],o=function(){s(!c)};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("span",{className:"profile_btn",onClick:o,children:"\ub85c\uadf8\uc544\uc6c3"}),Object(m.jsxs)(dt,{isOn:c,toggle:o,message:"\uc815\ub9d0\ub85c \ub85c\uadf8\uc544\uc6c3 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",children:[Object(m.jsx)("button",{className:"confirm_item",onClick:t,children:"\uc608"}),Object(m.jsx)("button",{className:"confirm_item",onClick:o,children:"\uc544\ub2c8\uc624"})]})]})}),xt=function(){var e=Object(b.g)(),t=Object(l.b)(),a=Object(r.useCallback)(Object(u.a)(i.a.mark((function a(){return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t(Ze());case 2:e.push("/");case 3:case"end":return a.stop()}}),a)}))),[e,t]);return Object(m.jsx)(ht,{onSignOutClick:a})},vt=(a(126),function(e){var t=e.children,a=e.toggle,r=e.isOn,n=e.location;return r?Object(m.jsxs)("div",{className:"menu",children:[Object(m.jsx)("div",{className:"menu_background",onClick:a}),Object(m.jsx)("div",{className:"menu_container ".concat(n),children:t})]}):Object(m.jsx)(m.Fragment,{})}),Nt=a(90),kt=a.n(Nt),yt=a(89),It=a.n(yt),Ut=a(91),wt=a.n(Ut),_t=a(92),Ct=a.n(_t),Pt=a(178),St=a(179),Dt=function(){var e=Object(b.h)().pathname,t=Object(l.b)(),a=Object(r.useState)(!1),n=Object(d.a)(a,2),c=n[0],s=n[1],o=function(e){s(!c)},O=Object(l.c)((function(e){return e.users.currentUserInfo})),p=O.userPhotoUrl,f=O.displayName,g=Object(r.useCallback)(Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Oe()),t(Ue()),e.next=4,t(ve(0));case 4:window.scrollTo(0,0);case 5:case"end":return e.stop()}}),e)}))),[t]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"nav",children:Object(m.jsxs)("div",{className:"nav_inner",children:[Object(m.jsx)("div",{className:"logo",children:Object(m.jsx)(j.b,{to:"/",onClick:g,children:"Racstagram"})}),Object(m.jsxs)("ul",{className:"items",children:[Object(m.jsx)("li",{className:"item",children:Object(m.jsx)(j.b,{to:"/",children:"/"===e?Object(m.jsx)(It.a,{className:"icon_home"}):Object(m.jsx)(kt.a,{className:"icon_home"})})}),Object(m.jsx)("li",{className:"item",children:Object(m.jsx)(j.b,{to:"/write",children:"/write"===e?Object(m.jsx)(wt.a,{className:"icon_write"}):Object(m.jsx)(Ct.a,{className:"icon_write"})})}),Object(m.jsxs)("li",{className:"item",children:[p&&Object(m.jsx)("img",{src:p,onClick:o,alt:"user_image",className:"nav_profile_image",style:e==="/user/".concat(f)||c?{border:""}:{border:"none"}}),Object(m.jsxs)(vt,{toggle:o,isOn:c,location:"nav_menu_location",children:[Object(m.jsxs)(j.b,{to:"/user/".concat(f),className:"menu_item",children:[Object(m.jsx)(Pt.a,{}),"\ud504\ub85c\ud544"]}),Object(m.jsxs)("div",{className:"menu_item",children:[Object(m.jsx)(St.a,{}),Object(m.jsx)(xt,{})]}),Object(m.jsx)("div",{className:"menu_item",onClick:o,children:Object(m.jsx)("div",{className:"last_item_text",children:"\ub098\uac00\uae30"})})]})]})]})]})})})},Et=n.a.memo(Dt),Lt=(a(127),function(){var e=Object(l.c)((function(e){return e.users.randomUserInfo}));return Object(m.jsxs)("div",{className:"side",children:[Object(m.jsx)("div",{className:"recommend",children:"\ud68c\uc6d0\ub2d8\uc744 \uc704\ud55c \ucd94\ucc9c"}),e&&e.map((function(e,t){return Object(m.jsxs)("div",{className:"user",children:[Object(m.jsxs)("div",{className:"user_info",children:[Object(m.jsx)("img",{className:"user_image",src:e.userPhotoUrl,alt:"random_user_image"}),Object(m.jsx)("div",{className:"user_name",children:e.displayName})]}),Object(m.jsx)(j.b,{to:"/user/".concat(e.displayName),className:"visit",children:"\ubcf4\uae30"})]},t.toString())})),Object(m.jsxs)("div",{className:"footer",children:[Object(m.jsxs)("div",{className:"copy",children:["\xa9 ",(new Date).getFullYear()," RACSTAGRAM FROM TAEYOUNG (RACCOONCODE)"]}),Object(m.jsx)("a",{className:"link",href:"https://goforit.tistory.com/",children:"Blog"}),Object(m.jsx)("a",{className:"link",href:"https://github.com/RaccoonCode96",children:"Github"})]})]})}),Tt=n.a.memo(Lt),Mt=function(){var e=Object(b.h)().state.post,t=Object(l.c)((function(e){return e.comment.comments}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Et,{}),Object(m.jsx)("div",{className:"page",children:Object(m.jsxs)("div",{className:"inner",children:[Object(m.jsxs)("main",{className:"main comments_main",children:[Object(m.jsxs)("ul",{className:"comments",children:[Object(m.jsxs)("li",{className:"post_text_container",children:[Object(m.jsx)("img",{className:"post_user_image",src:e.userPhotoUrl,alt:"postUser_image"}),Object(m.jsx)("div",{className:"post_info",children:Object(m.jsxs)("span",{className:"post_text",children:[Object(m.jsx)(j.b,{to:"/user/".concat(e.userDisplayName),className:"user_name",children:e.userDisplayName}),e.postText]})})]}),t.map((function(t){return Object(m.jsx)(pt,{postId:e.postId,commentObj:t},t.commentId)}))]}),Object(m.jsx)(gt,{postId:e.postId})]}),Object(m.jsx)(Tt,{})]})}),Object(m.jsx)("div",{className:"modal_root"})]})},At=a(39),Ft=(a(128),function(e){var t=e.children,a=e.toggle,n=e.isOn,c=e.rowNum,o=Object(r.useState)(!1),i=Object(d.a)(o,2),u=i[0],l=i[1],j={transform:"translate(-200px ,".concat(-48*c/2,"px)")};if(Object(r.useEffect)((function(){l(!0)}),[]),!u)return Object(m.jsx)(m.Fragment,{});var b=document.querySelector(".modal_root");return s.a.createPortal(n?Object(m.jsxs)("div",{className:"modal",children:[Object(m.jsx)("div",{className:"modal_background",onClick:a}),Object(m.jsx)("div",{className:"modal_container",style:j,children:t})]}):Object(m.jsx)(m.Fragment,{}),b)}),Gt=(a(129),a(78)),Rt=(a(130),function(e){var t=e.postId,a=e.toComments,r=e.isLike,n=e.onChange;return Object(m.jsxs)("div",{className:"post_control_container",children:[Object(m.jsx)("input",{type:"checkbox",id:"input/".concat(t),checked:r,onChange:n,className:"like_input"}),Object(m.jsx)("label",{htmlFor:"input/".concat(t),className:"post_control_btn",children:r?Object(m.jsx)(g.a,{icon:At.c,className:"icon onlike"}):Object(m.jsx)(g.a,{icon:Gt.b,className:"icon"})}),Object(m.jsx)("button",{className:"post_control_btn",onClick:a,children:Object(m.jsx)(g.a,{icon:Gt.a,className:"icon"})})]})}),Wt=function(e){var t=e.post,a=Object(b.g)(),n=Object(l.b)(),c=Object(b.h)().pathname,s=Object(r.useMemo)((function(){return"/"===c?"allLikes":"userLikes"}),[c]),o=Object(l.c)((function(e){return e.like[s]})),j=Object(r.useCallback)((function(){var e;return null===(e=o.find((function(e){return e.postId===t.postId})))||void 0===e?void 0:e.isLike}),[o,t]),O=Object(r.useMemo)((function(){return j()}),[j]),p=Object(r.useState)(O),f=Object(d.a)(p,2),g=f[0],h=f[1],x=Object(r.useMemo)((function(){return Object(lt.debounce)((function(e){O!==e&&n(e?X({postId:t.postId,type:s}):ee({postId:t.postId,type:s}))}),900)}),[O,n,t,s]),v=Object(r.useCallback)((function(e){var t=e.target.checked;h(t),x(t)}),[x]),N=Object(r.useCallback)(Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(Z(t.postId));case 2:a.push({pathname:"/".concat(t.postId,"/comments"),state:{post:t}});case 3:case"end":return e.stop()}}),e)}))),[n,a,t]);return Object(m.jsx)(Rt,{postId:t.postId,toComments:N,isLike:g,onChange:v})},zt=(a(131),function(e){var t=e.commentEl,a=t.commentDisplayName,r=t.comment;return Object(m.jsx)("div",{className:"post_comment_container",children:Object(m.jsxs)("span",{className:"comment_text",children:[Object(m.jsx)(j.b,{className:"user_name",to:"/user/".concat(a),children:a}),r]})})}),Bt=function(e){var t=e.post,a=e.deletePost,n=e.updatePost,c=Object(b.g)(),s=Object(l.b)(),o=Object(l.c)((function(e){return e.profile.currentUser.uid})),O=Object(r.useState)(!1),p=Object(d.a)(O,2),f=p[0],h=p[1],x=function(){h(!f)},v=Object(r.useState)(!1),N=Object(d.a)(v,2),k=N[0],y=N[1],I=function(){y(!k)},U=Object(r.useCallback)(Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(Z(t.postId));case 2:c.push({pathname:"/".concat(t.postId,"/comments"),state:{post:t}});case 3:case"end":return e.stop()}}),e)}))),[s,t,c]),w=t.postText.slice(0,35).split(/(\r\n|\n|\r)/gm)[0],_=Object(r.useState)(!1),C=Object(d.a)(_,2),P=C[0],S=C[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"post",children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"writer",children:[Object(m.jsxs)(j.b,{to:"/user/".concat(t.userDisplayName),className:"user_info",children:[Object(m.jsx)("img",{alt:"user_img",className:"user_img",src:t.userPhotoUrl,width:"32px",height:"32px"}),Object(m.jsx)("h4",{className:"user_name",children:t.userDisplayName})]}),Object(m.jsx)("button",{className:"post_menu",onClick:x,children:Object(m.jsx)(g.a,{icon:At.b,size:"1x"})})]}),Object(m.jsx)("div",{className:"post_img_container",children:t.postImageUrl&&Object(m.jsx)("img",{className:"post_img",src:t.postImageUrl,alt:"rweet img"})}),Object(m.jsx)(Wt,{post:t}),Object(m.jsxs)("div",{className:"post_content_container",children:[Object(m.jsxs)("div",{className:"post_text_container",children:[Object(m.jsxs)("span",{className:"post_text",children:[Object(m.jsx)(j.b,{to:"/user/".concat(t.userDisplayName),className:"user_name",children:t.userDisplayName}),P?t.postText:w]}),(t.postText>35||/(\r\n|\n|\r)/gm.test(t.postText))&&!P&&Object(m.jsx)("button",{className:"more_text_btn",onClick:function(e){S(!0)},children:"...\ub354 \ubcf4\uae30"})]}),Object(m.jsxs)("div",{className:"post_comments",children:[t.commentArray[0]&&Object(m.jsxs)("button",{className:"comments_count",onClick:U,children:["\ub313\uae00 ",t.commentArray[0].count,"\uac1c \ubaa8\ub450 \ubcf4\uae30"]}),t.commentArray.map((function(e){return Object(m.jsx)(zt,{commentEl:e},e.commentId)}))]})]})]})}),Object(m.jsxs)(Ft,{isOn:f,toggle:x,rowNum:3,children:[o===t.userId?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{className:"item",onClick:I,children:"\uc0ad\uc81c\ud558\uae30"}),Object(m.jsxs)(dt,{isOn:k,toggle:I,message:"\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",children:[Object(m.jsx)("button",{className:"confirm_item",onClick:function(e){a(t)},children:"\uc608"}),Object(m.jsx)("button",{className:"confirm_item",onClick:I,children:"\uc544\ub2c8\uc624"})]}),Object(m.jsx)("button",{className:"item",onClick:function(){n(t)},children:"\uc218\uc815\ud558\uae30"})]}):Object(m.jsx)(m.Fragment,{}),Object(m.jsx)("button",{className:"item",onClick:x,children:"\ucde8 \uc18c"})]})]})},Vt=n.a.memo(Bt),Zt=function(e){var t=e.execute,a=Object(r.useMemo)((function(){return Object(lt.debounce)(t,300)}),[t]),n=Object(r.useRef)(null),c=Object(r.useRef)(null);return Object(r.useEffect)((function(){c.current&&c.current.disconnect(),c.current=new IntersectionObserver((function(e){Object(d.a)(e,1)[0].isIntersecting&&a()}),{threshold:.5}),c.current.observe(n.current)}),[a]),Object(r.useEffect)((function(){return function(){c.current.disconnect()}}),[]),Object(m.jsx)("div",{ref:n,style:{height:"20px"}})},Yt=function(e){var t=e.posts,a=e.isGet,n=e.deletePost,c=e.getMorePosts,s=Object(b.g)(),o=Object(l.b)(),i=Object(l.c)((function(e){return e.post.getMorePosts})).isNone,u=Object(r.useCallback)((function(e){s.push({pathname:"/update/post",state:{post:e,profileInfo:{}}})}),[s]);return Object(r.useEffect)((function(){return function(){o(Te()),o(Ne()),o(ce()),o(xe()),o(ne())}}),[o]),Object(m.jsxs)(m.Fragment,{children:[t.map((function(e){return Object(m.jsx)(Vt,{post:e,updatePost:u,deletePost:n},e.postId)})),!i&&a&&Object(m.jsx)(Zt,{execute:c}),i&&"\ub354 \uc774\uc0c1 \uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."]})},qt=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.post.prevScrollY}));Object(r.useLayoutEffect)((function(){return t&&window.scrollTo(0,t),function(){e(ve(window.scrollY))}}),[e,t])},Ht=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.post.allPosts})),a=Object(l.c)((function(e){return e.post.getAllPosts.isGet}));qt();var n=Object(r.useCallback)((function(t){e(je(t)),e(Oe())}),[e]),c=Object(r.useCallback)((function(){var a,r=null===(a=t[t.length-1])||void 0===a?void 0:a.postDate;e(de({postDate:r,type:"allPosts"}))}),[e,t]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Et,{}),Object(m.jsx)("div",{className:"page",children:Object(m.jsxs)("div",{className:"inner",children:[Object(m.jsx)("div",{className:"main",children:Object(m.jsx)(Yt,{posts:t,isGet:a,deletePost:n,getMorePosts:c})}),Object(m.jsx)(Tt,{})]})}),Object(m.jsx)("div",{className:"modal_root"})]})},Jt=function(){var e=Object(b.h)().state.postNum,t=Object(r.useRef)(),a=Object(l.b)(),n=Object(b.i)().userName,c=Object(l.c)((function(e){return e.post})).userPosts,s=Object(l.c)((function(e){return e.post.getUserPosts.isGet})),o=Object(r.useCallback)((function(e){a(je(e)),a(me(n))}),[a,n]),i=Object(r.useCallback)((function(){var e,t=null===(e=c[c.length-1])||void 0===e?void 0:e.postDate;a(de({postDate:t,type:"userPosts",userName:n}))}),[a,c,n]);return Object(r.useLayoutEffect)((function(){!function(e){if(e){var a=t.current.children[e].offsetTop;window.scrollTo(0,a-54)}}(e)}),[e,a]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Et,{}),Object(m.jsx)("div",{className:"page",children:Object(m.jsxs)("div",{className:"inner",children:[Object(m.jsx)("div",{className:"main",ref:t,children:Object(m.jsx)(Yt,{posts:c,isGet:s,deletePost:o,getMorePosts:i})}),Object(m.jsx)(Tt,{})]})}),Object(m.jsx)("div",{className:"modal_root"})]})},$t=(a(132),function(e){var t=e.posts,a=Object(b.i)().userName,n=Object(b.g)(),c=Object(l.b)(),s=Object(l.c)((function(e){return e.post.getMorePosts})).isNone,o=Object(l.c)((function(e){return e.post.getUserPosts.isGet})),i=Object(r.useCallback)((function(){var e,r=null===(e=t[t.length-1])||void 0===e?void 0:e.postDate;c(de({postDate:r,type:"userPosts",userName:a}))}),[c,t,a]),u=Object(r.useCallback)((function(e){n.push({pathname:"/user/".concat(a,"/posts"),state:{postNum:e}})}),[n,a]);return Object(r.useEffect)((function(){return function(){c(xe())}}),[c]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"post_table",children:function(e){for(var t=Object(z.a)(e),a=[],r=e.length,n=0;n<=r/3;n++)a=[].concat(Object(z.a)(a),[Object(z.a)(t.splice(0,3))]);return a}(t).map((function(e,t){return Object(m.jsx)("div",{className:"posts_row",children:[0,1,2].map((function(a){return e[a]?Object(m.jsx)("div",{className:"post_image_container",onClick:function(){u(3*t+a)},children:Object(m.jsx)("img",{src:e[a].postImageUrl,alt:"postImageUrl",className:"post_image"})},"postTable/".concat(e[a].postId.toString())):Object(m.jsx)("div",{className:"none_image"},a.toString())}))},t.toString())}))}),!s&&o&&Object(m.jsx)(Zt,{execute:i})]})}),Kt=function(){var e=Object(r.useState)({width:void 0,height:void 0}),t=Object(d.a)(e,2),a=t[0],n=t[1];return Object(r.useEffect)((function(){function e(){n({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),a},Qt=(a(133),function(e){var t=e.profileInfo,a=e.updateProfile,r=e.postCount,n=Object(b.i)().userName,c=Object(l.c)((function(e){return e.users.currentUserInfo.displayName})),s=t.userPhotoUrl,o=t.displayName,i=t.userIntro,u=t.subDisplayName,j=t.website,d=Kt().width,O=function(e){if(!e)return"";var t=e.match(/\/\/([A-Za-z0-9.]+)\/?([A-Za-z0-9]*)/);return t[2]?e.match(/\/\/([A-Za-z0-9.]+\/[A-Za-z0-9]+)/)[1]:t[1]};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"profile_container",children:[Object(m.jsx)("div",{className:"profile_image_container",children:s&&Object(m.jsx)("img",{src:s,alt:"userPhotoUrl",className:"profile_image"})}),Object(m.jsxs)("div",{className:"profile_info",children:[Object(m.jsxs)("div",{className:"profile_info_top",children:[Object(m.jsx)("div",{className:"profile_name",children:o}),n===c&&Object(m.jsx)("button",{className:"profile_edit_btn",onClick:a,children:"\ud504\ub85c\ud544 \ud3b8\uc9d1"})]}),d<=753?Object(m.jsx)(m.Fragment,{}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"post_count",children:["\uac8c\uc2dc\ubb3c ",Object(m.jsx)("span",{className:"count",children:r})]}),Object(m.jsxs)("div",{className:"profile_info_bottom",children:[Object(m.jsx)("h1",{className:"sub_name",children:u}),Object(m.jsx)("div",{className:"profile_intro",children:i}),Object(m.jsx)("div",{children:Object(m.jsx)("a",{className:"profile_website",rel:"noreferrer",href:j,target:"_blank",children:O(j)})})]})]})]})]}),d>753?Object(m.jsx)(m.Fragment,{}):Object(m.jsxs)("div",{className:"profile_info",children:[Object(m.jsxs)("div",{className:"profile_info_bottom",children:[Object(m.jsx)("h1",{className:"sub_name",children:u}),Object(m.jsx)("div",{className:"profile_intro",children:i}),Object(m.jsx)("div",{children:Object(m.jsx)("a",{className:"profile_website",rel:"noreferrer",href:j,target:"_blank",children:O(j)})})]}),Object(m.jsxs)("div",{className:"post_count_small",children:["\uac8c\uc2dc\ubb3c ",Object(m.jsx)("span",{className:"count",children:r})]})]})]})}),Xt=(a(134),function(){var e=Object(b.i)().userName,t=Object(l.b)(),a=Object(b.g)(),n=Object(l.c)((function(e){return e.post.userPosts})),c=Object(l.c)((function(e){return e.users.userInfo})),s=Object(r.useCallback)((function(){t(_e(e)),t(me(e))}),[t,e]),o=Object(r.useCallback)((function(){a.push({pathname:"/update/profile",state:{profileInfo:c,post:[]}})}),[a,c]);return Object(r.useLayoutEffect)((function(){s()}),[s]),Object(m.jsx)("div",{className:"user_profile_container",children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Qt,{profileInfo:c,updateProfile:o,postCount:null===n||void 0===n?void 0:n.length}),Object(m.jsx)($t,{posts:n})]})})}),ea=function(){return Object(r.useLayoutEffect)((function(){window.scrollTo(0,0)}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Et,{}),Object(m.jsx)("div",{className:"page",children:Object(m.jsx)("div",{className:"inner",children:Object(m.jsx)(Xt,{})})}),Object(m.jsx)("div",{className:"modal_root"})]})},ta=function(e,t){var a=document.createElement("canvas"),r=t,n=e.width,c=e.height;return n>c?n>r&&(c*=r/n,n=r):c>r&&(n*=r/c,c=r),a.width=n,a.height=c,a.getContext("2d").drawImage(e,0,0,n,c),a.toDataURL("image/jpeg")},aa=(a(135),function(e){var t=e.onChange,a=e.inputs,r=e.onSubmit,n=e.currentUserInfo,c=e.postFormError,s=e.errorToggle,o=a.text,i=a.imageBase64,u=n.userPhotoUrl,l=n.displayName,j=Object(b.h)().pathname;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("form",{onSubmit:r,className:"post_form",children:[Object(m.jsxs)("div",{className:"image_container",children:[i?Object(m.jsx)("img",{src:i,alt:"preview_image",className:"preview_image"}):Object(m.jsx)("div",{className:"none_image",children:Object(m.jsx)("label",{htmlFor:"file_input_post",children:Object(m.jsx)(g.a,{className:"icon_camera",icon:At.a})})}),Object(m.jsx)("input",{type:"file",name:"file",id:"file_input_post",accept:".jpg, .png",onChange:t})]}),Object(m.jsxs)("div",{className:"text_container",children:[Object(m.jsxs)("div",{className:"profile_image_container",children:[Object(m.jsxs)("div",{className:"profile",children:[Object(m.jsx)("img",{src:u,alt:"Creator_Profile",className:"user_image"}),Object(m.jsx)("span",{className:"user_name",children:l})]}),Object(m.jsx)("label",{htmlFor:"file_input_post",className:"small_file_input_btn",children:Object(m.jsx)(g.a,{className:"icon_camera",icon:At.a})})]}),Object(m.jsx)("textarea",{name:"text",value:o,placeholder:"\ub0b4\uc6a9\uc744 \uc791\uc131\ud574 \uc8fc\uc138\uc694.",wrap:"hard",maxLength:120,onChange:t,className:"text_input"}),Object(m.jsx)("input",{type:"submit",value:"/write"===j?"\uc791\uc131\ud558\uae30":"\uc218\uc815\ud558\uae30",className:"btn_blue"})]})]}),Object(m.jsx)(dt,{isOn:c,message:c,toggle:s,children:Object(m.jsx)("button",{onClick:s,className:"confirm_item",children:"\ud655\uc778"})})]})}),ra=function(e){var t=e.post,a=Object(b.g)(),n=Object(l.b)(),c=Object(l.c)((function(e){return e.users.currentUserInfo})),s=t.postImageUrl,o=t.postText,j=t.postId,O=t.userId,p=Object(r.useState)({imageBase64:s,prevImageUrl:s,prevText:o,text:o,postId:j,userId:O,preventSubmit:!1}),f=Object(d.a)(p,2),g=f[0],h=f[1],x=Object(r.useState)(""),N=Object(d.a)(x,2),k=N[0],y=N[1],I=Object(r.useCallback)((function(){y(!k)}),[k]),U=Object(r.useCallback)((function(e){var t=e.target,a=t.name,r=t.value,n=t.files;if("file"===a)if(n[0]){var c=n[0],s=new FileReader;s.onloadend=function(e){var t=e.currentTarget.result,a=new Image;a.src=t,a.onload=function(e){var t=ta(a,600);h(Object(v.a)(Object(v.a)({},g),{},{imageBase64:t}))}},s.readAsDataURL(c)}else h(Object(v.a)(Object(v.a)({},g),{},{imageBase64:g.prevImageUrl}));else"text"===a&&h(Object(v.a)(Object(v.a)({},g),{},{text:r}))}),[g]),w=Object(r.useCallback)(function(){var e=Object(u.a)(i.a.mark((function e(t){var r,c,s,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=g.preventSubmit,c=g.imageBase64,s=g.prevImageUrl,o=g.text,u=g.prevText,o){e.next=5;break}return y("\ub0b4\uc6a9\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694."),e.abrupt("return");case 5:if(!0!==r&&(o!==u||c!==s)){e.next=10;break}return a.replace("/"),e.abrupt("return");case 10:if(h(Object(v.a)(Object(v.a)({},g),{},{preventSubmit:!0})),c===s){e.next=14;break}return e.next=14,n(A(c));case 14:return e.next=16,n(le(g));case 16:a.replace("/");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,g,a]);return Object(m.jsx)(aa,{onChange:U,inputs:g,onSubmit:w,currentUserInfo:c,postFormError:k,errorToggle:I})},na=(a(136),function(e){var t=e.onChange,a=e.inputs,r=e.onSubmit,n=a.userIntro,c=a.imageBase64,s=a.displayName,o=a.subDisplayName,i=a.website,u=a.prevDisplayName,l=it(u,s),j=function(e){var t="",a="",r="",n=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/.test(e);return e?n?(t="green",a="URL \ud615\uc2dd\uc5d0 \ub9de\uc2b5\ub2c8\ub2e4.",r="success"):(t="red",a="URL \ud615\uc2dd\uc5d0 \ub9de\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. (http:// \ub610\ub294 https://\ub97c \ud3ec\ud568\uc2dc\ucf1c\uc8fc\uc138\uc694.)",r="error"):(t="rgba(0, 0, 0, 0.3)",a="",r="empty"),{input:ct({color:t}).input,helperText:ct({color:t}).helperText,helperTextMessage:a,code:r}}(i);return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("form",{onSubmit:r,className:"update_profile",children:[Object(m.jsxs)("div",{className:"update_profile_container",children:[c?Object(m.jsx)("img",{src:c,alt:"preview_image",width:"300px",className:"preview_image"}):Object(m.jsx)("div",{className:"none_image"}),Object(m.jsx)("input",{type:"file",name:"file",id:"file_input_profile",accept:".jpg, .png",onChange:t}),Object(m.jsxs)("div",{className:"current_info",children:[Object(m.jsx)("div",{className:"current_dispaly_name",children:u}),Object(m.jsxs)("label",{htmlFor:"file_input_profile",className:"change_profile_image",children:[Object(m.jsx)(g.a,{className:"icon_camera",icon:At.a}),"\ud504\ub85c\ud544 \uc0ac\uc9c4 \ubcc0\uacbd"]})]})]}),Object(m.jsxs)("div",{className:"info_container",children:[Object(m.jsxs)("div",{className:"display_name_container row",children:[Object(m.jsx)("div",{className:"label",children:"\uc0ac\uc6a9\uc790 \uc774\ub984"}),Object(m.jsx)(tt.a,{type:"text",name:"displayName",placeholder:"\uc0ac\uc6a9\uc790 \uc774\ub984",required:!0,value:s,onChange:t,className:"input_display_name",variant:"outlined",size:"small",helperText:l.helperTextMessage,InputProps:{className:l.input},FormHelperTextProps:{className:l.helperText}})]}),Object(m.jsxs)("div",{className:"user_intro row",children:[Object(m.jsx)("div",{className:"label",children:"\uc18c \uac1c"}),Object(m.jsx)(tt.a,{name:"userIntro",value:n,wrap:"hard",maxLength:120,minRows:3,maxRows:4,onChange:t,required:!0,placeholder:"\uc18c\uac1c\ub97c \uc791\uc131\ud574 \uc8fc\uc138\uc694. (\ucd5c\ub300 4\uc904 \ubc0f 64\uc790)",className:"input_user_intro",multiline:!0,variant:"outlined",size:"medium"})]}),Object(m.jsxs)("div",{className:"sub_name row",children:[Object(m.jsx)("div",{className:"label",children:"\uc774 \ub984"}),Object(m.jsx)(tt.a,{type:"text",name:"subDisplayName",placeholder:"\uc774\ub984",value:o,onChange:t,className:"input_sub_name",variant:"outlined",size:"small"})]}),Object(m.jsxs)("div",{className:"website row",children:[Object(m.jsx)("div",{className:"label",children:"\uc6f9 \uc0ac\uc774\ud2b8"}),Object(m.jsx)(tt.a,{type:"text",name:"website",placeholder:"https:// \ub610\ub294 http://\ub97c \ud3ec\ud568\uc2dc\ucf1c \uc8fc\uc138\uc694",value:i,onChange:t,className:"input_website",variant:"outlined",size:"small",helperText:j.helperTextMessage,InputProps:{className:j.input},FormHelperTextProps:{className:j.helperText}})]}),Object(m.jsx)(rt.a,{variant:"contained",className:"update_btn",color:"primary",type:"submit",disableElevation:!0,disabled:"success"!==l.code&&"default"!==l.code||"empty"===l.code||"empty"!==j.code&&"success"!==j.code,children:"\uc218\uc815"})]})]})})}),ca=function(e){var t=e.profileInfo,a=Object(b.g)(),n=Object(l.b)(),c=t.userPhotoUrl,s=t.displayName,o=t.userIntro,j=t.subDisplayName,O=t.website,p=Object(l.c)((function(e){return e.users.checkDisplayName.exist})),f=Object(r.useState)({userIntro:o,displayName:s,imageBase64:c,subDisplayName:j,website:O,prevIntro:o,prevDisplayName:s,prevImageUrl:c,prevSubDisplayName:j,preventSubmit:!1,prevWebsite:O}),g=Object(d.a)(f,2),h=g[0],x=g[1],N=Object(r.useCallback)((function(e){h.prevDisplayName!==e&&n(we(e))}),[n,h]),k=Object(r.useMemo)((function(){return Object(lt.debounce)((function(e){N(e)}),500)}),[N]),y=Object(r.useCallback)((function(e){var t=e.target,a=t.name,r=t.value,n=t.files;if("userIntro"===a)x(Object(v.a)(Object(v.a)({},h),{},{userIntro:r}));else if("file"===a)if(n[0]){var c=n[0],s=new FileReader;s.onloadend=function(e){var t=e.currentTarget.result,a=new Image;a.src=t,a.onload=function(e){var t=ta(a,300);x(Object(v.a)(Object(v.a)({},h),{},{imageBase64:t}))}},s.readAsDataURL(c)}else x(Object(v.a)(Object(v.a)({},h),{},{imageBase64:h.prevImageUrl}));else"displayName"===a?(x(Object(v.a)(Object(v.a)({},h),{},{displayName:r})),k(r)):"subDisplayName"===a?x(Object(v.a)(Object(v.a)({},h),{},{subDisplayName:r})):"website"===a&&x(Object(v.a)(Object(v.a)({},h),{},{website:r}))}),[h,k]),I=Object(r.useCallback)(function(){var e=Object(u.a)(i.a.mark((function e(t){var r,c,s,o,u,l,j,b,d,O,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=h.imageBase64,c=h.userIntro,s=h.displayName,o=h.subDispalyName,u=h.website,l=h.prevImageUrl,j=h.prevIntro,b=h.prevDisplayName,d=h.prevSubDisplayName,O=h.prevWebsite,m=h.preventSubmit,b===s){e.next=9;break}if(p[1]&&p[1]===s){e.next=6;break}return window.alert("\ub2c9\ub124\uc784 \uc911\ubcf5 \ud655\uc778\uc774 \ud544\uc694 \ud569\ub2c8\ub2e4."),e.abrupt("return");case 6:if(!p[0]){e.next=9;break}return window.alert("".concat(p[1],"\uc740 \uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ub2c9\ub124\uc784 \uc785\ub2c8\ub2e4.")),e.abrupt("return");case 9:if(!0!==m&&(r!==l||s!==b||c!==j||o!==d||u!==O)){e.next=14;break}return a.replace("/user/".concat(b)),e.abrupt("return");case 14:if(x(Object(v.a)(Object(v.a)({},h),{},{preventSubmit:!0})),!r){e.next=18;break}return e.next=18,n(A(r));case 18:return e.next=20,n(Ae(h));case 20:a.replace("/user/".concat(s));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,a,h,p]);return Object(m.jsx)(na,{onChange:y,inputs:h,onSubmit:I})},sa=function(){var e=Object(b.h)(),t=e.pathname,a=e.state,r=a.profileInfo,n=a.post;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Et,{}),Object(m.jsx)("div",{className:"page",children:Object(m.jsx)("div",{className:"inner",children:"/update/profile"===t?Object(m.jsx)(ca,{profileInfo:r}):Object(m.jsx)(ra,{post:n})})}),Object(m.jsx)("div",{className:"modal_root"})]})},oa=function(){var e=Object(l.b)(),t=Object(b.g)(),a=Object(l.c)((function(e){return e.users.currentUserInfo})),n=Object(r.useState)({imageBase64:"",text:"",preventSubmit:!1}),c=Object(d.a)(n,2),s=c[0],o=c[1],j=Object(r.useState)(""),O=Object(d.a)(j,2),p=O[0],f=O[1],g=Object(r.useCallback)((function(){f(!p)}),[p]),h=Object(r.useCallback)((function(e){var t=e.target,a=t.name,r=t.value,n=t.files;if("file"===a)if(n[0]){var c=n[0],i=new FileReader;i.onloadend=function(e){var t=e.currentTarget.result,a=new Image;a.src=t,a.onload=function(e){var t=ta(a,600);o(Object(v.a)(Object(v.a)({},s),{},{imageBase64:t}))}},i.readAsDataURL(c)}else o(Object(v.a)(Object(v.a)({},s),{},{imageBase64:""}));else"text"===a&&o(Object(v.a)(Object(v.a)({},s),{},{text:r}))}),[s]),x=Object(r.useCallback)(function(){var r=Object(u.a)(i.a.mark((function r(n){var c,u;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),c=s.text,u=s.imageBase64,c){r.next=7;break}return f("\ub0b4\uc6a9\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694."),r.abrupt("return");case 7:if(u){r.next=10;break}return f("\uc0ac\uc9c4\uc744 \uc62c\ub824 \uc8fc\uc138\uc694."),r.abrupt("return");case 10:if(!1!==s.preventSubmit||!u){r.next=21;break}return o(Object(v.a)(Object(v.a)({},s),{},{preventSubmit:!0})),r.next=14,e(A(u));case 14:return r.next=16,e(be(c));case 16:return r.next=18,e(Oe());case 18:return r.next=20,e(me(a.displayName));case 20:t.replace("/");case 21:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),[e,s,t,a]);return Object(m.jsx)(aa,{onChange:h,inputs:s,onSubmit:x,currentUserInfo:a,postFormError:p,errorToggle:g})},ia=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Et,{}),Object(m.jsx)("div",{className:"page",children:Object(m.jsx)("div",{className:"inner",children:Object(m.jsx)(oa,{})})}),Object(m.jsx)("div",{className:"modal_root"})]})},ua=function(){var e=Object(l.c)((function(e){return e.profile.currentUser.isSignIn})),t=Object(l.b)(),a=Object(r.useCallback)(Object(u.a)(i.a.mark((function a(){return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e){a.next=4;break}return a.next=3,Promise.all([t(Oe()),t(Pe())]);case 3:t(Ue());case 4:case"end":return a.stop()}}),a)}))),[t,e]);return Object(r.useEffect)((function(){a()}),[a]),Object(m.jsx)(j.a,{basename:"/redux_racstagram",children:Object(m.jsx)(b.d,{children:e?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(b.b,{path:"/",exact:!0,component:Ht}),Object(m.jsx)(b.b,{path:"/write",exact:!0,component:ia}),Object(m.jsx)(b.b,{path:"/update/profile",exact:!0,component:sa}),Object(m.jsx)(b.b,{path:"/update/post",exact:!0,component:sa}),Object(m.jsx)(b.b,{path:"/user/:userName",exact:!0,component:ea}),Object(m.jsx)(b.b,{path:"/user/:userName/posts",exact:!0,component:Jt}),Object(m.jsx)(b.b,{path:"/:postId/comments",exact:!0,component:Mt}),Object(m.jsx)(b.a,{from:"*",to:"/"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(b.b,{path:"/",exact:!0,component:bt}),Object(m.jsx)(b.a,{from:"*",to:"/"})]})})})},la=(a(137),function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"load",children:[Object(m.jsx)("h2",{className:"title",children:"Racstagram"}),Object(m.jsx)("div",{className:"icon",children:Object(m.jsx)(g.a,{className:"fa-spin",icon:f.c,size:"10x"})})]})})}),ja=function(e){var t=e.isInit,a=e.isSignInOut;return Object(r.useEffect)((function(){a()}),[a]),Object(m.jsx)(m.Fragment,{children:t?Object(m.jsx)(ua,{}):Object(m.jsx)(la,{})})},ba=Object(N.c)({name:"redux-racstagram/init",initialState:{isInit:!1},reducers:{setIsinitTrue:function(e){return Object(v.a)(Object(v.a)({},e),{},{isInit:!0})}},extraReducers:{}}),da=ba.reducer,Oa=ba.actions.setIsinitTrue,ma=function(){var e=Object(l.c)((function(e){return e.init.isInit})),t=Object(l.b)(),a=Object(r.useCallback)((function(){E.onAuthStateChanged(function(){var e=Object(u.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(We(a||"")),t(Oa());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t]);return Object(m.jsx)(ja,{isInit:e,isSignInOut:a})};a(138);var pa=function(){return Object(m.jsx)(ma,{})},fa=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,184)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))},ga=a(34),ha=Object(ga.b)({init:da,auth:$e,post:fe,profile:Ge,users:De,image:R,comment:H,like:ae}),xa=Object(N.a)({reducer:ha});s.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(l.a,{store:xa,children:Object(m.jsx)(pa,{})})}),document.getElementById("root")),fa()}},[[139,1,2]]]);
//# sourceMappingURL=main.b3895803.chunk.js.map